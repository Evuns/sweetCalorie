<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Рецепта</title>
    <th:block th:include="~{fragments/head}"></th:block>
</head>

<body>
<div class="empty"></div>
<header class="nav-container" id="navbar">
    <th:block th:include="~{fragments/nav}"></th:block>
</header>

<div style="opacity: 0.15;">
    <th:block th:include="~{fragments/background}"></th:block>
</div>

<div class="login-register-conteiner">
    <main class="login-register new-recepe">
        <h1 class="">Вашата рецепта</h1>
        <hr class=""/>
        <form class="" th:object="${recipeAddBindingModel}" th:action="@{/recipes/add}" method="POST">
            <input type="submit" value="Създай рецепта" class="add_btn button-big"/>
            <div>
                <div class="">
                    <h3 class="new-recepe__heading">Рецепта</h3>
                    <div class="">
                        <label for="title" class="">Име</label>
                        <div>
                            <small th:each="e : ${#fields.errors('title')}" th:text="${e}" class="text-danger">Грешно
                                заглавие</small>
                            <input th:field="*{title}" th:errorclass="bg-danger" type="text" class="" id="title"
                                   name="title" placeholder="Име на рецептата"/>

                        </div>
                    </div>
                </div>

                <h3 class="new-recepe__heading">Снимка на рецепта</h3>
                <label for="image">Постави линк към изображението</label>
                <input th:field="*{image}" type="text" class="" id="image"
                       placeholder="..."/>
                <div>
                    <h3 class="new-recepe__heading">Хранително съдържание</h3>
                    <div class="new-recepe__nut">
                        <label for="calories">Калории</label>
                        <div>
                            <small th:each="e : ${#fields.errors('calories')}" th:text="${e}"
                                   class="text-danger"></small>
                            <input th:field="*{calories}" th:errorclass="bg-danger" type="text" class="" id="calories"
                                   name="calories" placeholder="cal"/>
                        </div>
                        <label for="fats">Мазнини</label>
                        <div>
                            <small th:each="e : ${#fields.errors('fats')}" th:text="${e}" class="text-danger"></small>
                            <input th:field="*{fats}" th:errorclas="bg-danger" type="text" class="" id="fats"
                                   placeholder="гр."/>
                        </div>
                        <label for="carbohydrates">Въглехидрати</label>
                        <div>
                            <small th:each="e : ${#fields.errors('carbohydrates')}" th:text="${e}"
                                   class="text-danger"></small>
                            <input th:field="*{carbohydrates}" th:errorclas="bg-danger" type="text" class=""
                                   id="carbohydrates"
                                   placeholder="гр."/>
                        </div>
                        <label for="proteins">Протеини</label>
                        <div>
                            <small th:each="e:${#fields.errors('proteins')}" th:text="${e}" class="text-danger"></small>
                            <input th:field="*{proteins}" th:errorclas="bg-danger" type="text" class="" id="proteins"
                                   placeholder="гр."/>
                        </div>
                    </div>
                </div>
                <br>
                <div class="new-recepe__nut">
                    <label for="servings">Порции</label>
                    <div>
                        <small th:each="e:${#fields.errors('servings')}" th:text="${e}" class="text-danger"></small>
                        <input th:field="*{servings}" th:errorclass="bg-danger" type="text" class="" id="servings"
                               placeholder="4"/>
                    </div>
                    <label for="time">Приготвяне</label>
                    <div>
                        <small th:each="e:${#fields.errors('time')}" th:text="${e}" class="text-danger"></small>
                        <input th:field="*{time}" th:errorclass="bg-danger" type="text" class="" id="time"
                               placeholder="30 мин"/>
                    </div>
                    <label for="difficulty">Трудност</label>
                    <div>
                        <small th:each="e:${#fields.errors('difficulty')}" th:text="${e}" class="text-danger"></small>
                        <input th:field="*{difficulty}" th:errorclass="bg-danger" type="text" class="" id="difficulty"
                               placeholder="Лесно"/>
                    </div>


                    <div>
                        <form>
                            <label for="food">Храна</label>
                            <input id="food" placeholder="Наименование"
                                   th:field="*{ingredients[0].food}" type="text">
                            <label for="quantity">Количество</label>
                            <input id="quantity" placeholder="Наименование"
                                   th:field="*{ingredients[0].quantity}" type="text">
                            <label for="units">Мерна единица</label>
                            <input id="units" placeholder="Наименование"
                                   th:field="*{ingredients[0].units}" type="text">
                            <input type="button" class="add-row button-big" value="Добави съставка">
                        </form>
                        <table>
                            <thead>
                            <tr>
                                <th>Избери</th>
                                <th>Наименование</th>
                                <th>Количество</th>
                                <th>Мерна единица</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr></tr>
                            </tbody>
                        </table>
                        <button type="button" class="delete-row">Изтрий съставка</button>


                    </div>

                </div>


                <!--            <button type="submit" class="contact100-form-btn">-->
                <!--                Създай рецепта-->
                <!--            </button>-->
                <div>
                    <h3 class="new-recepe__heading">НАЧИН НА ПРИГОТВЯНЕ</h3>
                    <div class="">
                        <label for="description">Начин на приготвяне</label>
                        <textarea th:field="*{description}" th:errorclass="bg-danger" type="text" id="description"
                                  class="form-textarea" cols="40" rows="6" data-component="textarea"
                                  placeholder="..."></textarea>
                        <small th:each="e:${#fields.errors('description')}" th:text="${e}"
                               class="text-danger"></small>
                    </div>
                </div>
            </div>
        </form>
    </main>
</div>

<footer class="footer">
    <th:block th:include="~{fragments/footer}"></th:block>
</footer>

<th:block th:include="~{fragments/function}"></th:block>

</body>

<script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
<script>
    $(document).ready(function () {
        $(".add-row").click(function () {
            var food = $("#food").val();
            var quantity = $("#quantity").val();
            var units = $("#units").val();
            var markup = "<tr><td><input type='checkbox' name='record'></td><td>" + food + "</td><td>" + quantity + "</td><td>" + units + "</td></tr>";
            $("table tbody").append(markup);
        });

        $(".delete-row").click(function () {
            $("table tbody").find('input[name="record"]').each(function () {
                if ($(this).is(":checked")) {
                    $(this).parents("tr").remove();
                }
            });
        });
    });
</script>
</html>

